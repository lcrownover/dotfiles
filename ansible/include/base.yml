---
- name: configure base
  hosts: localhost
  gather_facts: no

  tasks:

  - name: ensure repos dir
    ansible.builtin.file:
      path: '{{ ansible_env.HOME }}/repos'
      state: directory

  - name: macOS => install base packages
    when: ansible_distribution == 'MacOSX'
    community.general.homebrew:
      name:
      - go
      - geckodriver
      - gsed
      - kubernetes

  - name: Ubuntu => install base packages
    when: ansible_distribution == 'Ubuntu'
    apt:
      update_cache: yes
      name:
      - go
      - geckodriver
      - kubernetes

  - name: macOS => install homebrew casks
    when: ansible_distribution == 'MacOSX'
    community.general.homebrew_cask:
      name:
      - rectangle
