# uncomment this line to measure performance
#zmodload zsh/zprof
#setopt SOURCE_TRACE

export ZSH=$HOME/.oh-my-zsh
ZSH_THEME="robbyrussell"

ulimit -n 1024

plugins=(
	git
	zsh-autosuggestions
	docker
	zsh-syntax-highlighting
)

ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE='fg=8'

source $ZSH/oh-my-zsh.sh
unsetopt AUTO_CD

if [[ -d $HOME/.rbenv ]]; then
    GEM_HOME="$HOME/.gem"
    export PATH="$GEM_HOME:$PATH"
    eval "$(rbenv init -)"
fi

if [[ -d $HOME/.pyenv ]]; then
    export PYENV_ROOT="$HOME/.pyenv"
    export PATH="$PYENV_ROOT/shims:$PATH"
    eval "$(pyenv init -)"
    eval "$(pyenv virtualenv-init -)"
    export LDFLAGS="-L/usr/local/opt/zlib/lib -L/usr/local/opt/bzip2/lib"
    export CPPFLAGS="-I/usr/local/opt/zlib/include -I/usr/local/opt/bzip2/include"
fi

compdef __start_kubectl k
source <(kubectl completion zsh)

# custom prompt -- before managed hostname :(
setopt prompt_subst
# if [[ "$(hostname)" = "is-lc-forge" ]]; then
    # PROMPT_HOSTNAME='eitri'
# else
    # PROMPT_HOSTNAME="$(hostname)"
# fi
# PROMPT='%{$fg[red]%}[%{$fg[green]%}%n%{$fg[yellow]%}@%{$fg[blue]%}$PROMPT_HOSTNAME:%{$fg[magenta]%}%1~%{$fg[red]%}] $(git_prompt_info)% %{$reset_color%}'
#PROMPT='%{$fg[magenta]%}%1~%{$fg[cyan]%  \$ $(git_prompt_info)% %{$reset_color%}'
# PROMPT='$(git_prompt_info)% %{$fg[magenta]%}%1~%{$fg[cyan]%} \$ %{$reset_color%}'
# PROMPT='%{$fg[magenta]%}%1~ $(git_prompt_info)% %{$reset_color%}'

# everything else will be loaded by zshenv (autoload) as this file is loaded in a non-interactive session

# uncomment this line to display measured performance
#zprof

#
# If there's anything below this comment,
# it probably needs to be sorted into a file or somehow organized.
#
